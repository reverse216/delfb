<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Delfin Bebek</title>
    <style>
        :root { --primary: #ff9a9e; --bg-color: #fecfef; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background: #e0f7fa; height: 100vh; display: flex; justify-content: center; align-items: center; user-select: none; }
        #game-container { width: 100%; height: 100%; max-width: 450px; background: #fff; position: relative; display: flex; flex-direction: column; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        
        /* GiriÅŸ EkranÄ± */
        #login-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 10; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .login-box input { padding: 15px; border-radius: 20px; border: 1px solid #ddd; margin-bottom: 10px; text-align: center; background: #f9f9f9; }
        .btn-main { padding: 12px 40px; background: var(--primary); color: white; border: none; border-radius: 25px; font-size: 18px; cursor: pointer; box-shadow: 0 4px 10px rgba(255, 154, 158, 0.4); }
        
        /* Oyun ArayÃ¼zÃ¼ */
        #game-ui { display: none; height: 100%; flex-direction: column; justify-content: space-between; padding: 20px; box-sizing: border-box; }
        .stats-container { background: rgba(255,255,255,0.9); padding: 15px; border-radius: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-box { font-size: 14px; color: #555; display: flex; align-items: center; }
        .bar-wrapper { flex-grow: 1; height: 8px; background: #eee; border-radius: 4px; margin-left: 8px; overflow: hidden; }
        .bar-fill { height: 100%; width: 100%; transition: width 0.5s ease; }
        
        /* Renkler */
        #hunger-bar { background: #ffadad; } 
        #hygiene-bar { background: #9bf6ff; }
        #sleep-bar { background: #bdb2ff; } 
        #fun-bar { background: #fdffb6; }

        /* Karakter AlanÄ± */
        .character-area { flex-grow: 1; display: flex; justify-content: center; align-items: center; position: relative; }
        
        /* GIF AyarÄ±: Pixel Art olduÄŸu iÃ§in bulanÄ±klaÅŸmasÄ±n diye */
        #char-img {
            width: 200px; 
            height: 200px; 
            image-rendering: pixelated; /* Pikselleri net gÃ¶sterir */
            object-fit: contain;
        }

        /* Butonlar */
        .actions-container { display: flex; justify-content: space-around; background: white; padding: 15px; border-radius: 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .action-btn { background: none; border: none; font-size: 32px; cursor: pointer; transition: transform 0.1s; padding: 10px; }
        .action-btn:active { transform: scale(0.9); }
        
        /* Durum MesajÄ± */
        #status-bar { text-align: center; font-size: 12px; color: #aaa; margin-bottom: 5px; }
        #mini-game-screen {
    display: none; /* BaÅŸlangÄ±Ã§ta gizli */
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: linear-gradient(to bottom, #2b0042, #4b0082); /* Gece gÃ¶kyÃ¼zÃ¼ */
    z-index: 100;
    overflow: hidden;
    flex-direction: column;
    align-items: center;
}

#game-info {
    width: 100%;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    color: #fff;
    font-size: 20px;
    font-weight: bold;
    z-index: 101;
}

/* DÃ¼ÅŸen nesneler */
.falling-item {
    position: absolute;
    font-size: 30px;
    animation: fall linear forwards;
}

@keyframes fall {
    to { transform: translateY(110vh); }
}


        /* --- SEVGÄ°LÄ°LER GÃœNÃœ Ã–ZEL STÄ°LLERÄ° --- */

/* 1. SaÄŸ Ãœstteki KÃ¼Ã§Ã¼k Buton */
#vday-btn {
    position: fixed;
    top: 15px;
    right: 15px;
    width: 50px;
    height: 50px;
    background: #ff4d6d;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 77, 109, 0.5);
    z-index: 200;
    animation: pulse 1.5s infinite;
}

/* Kalp AtÄ±ÅŸÄ± Animasyonu */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); box-shadow: 0 0 25px rgba(255, 77, 109, 0.8); }
    100% { transform: scale(1); }
}

/* 2. Bildirim Balonu */
#vday-notification {
    display: none; /* BaÅŸlangÄ±Ã§ta gizli */
    position: fixed;
    top: 75px; /* Butonun hemen altÄ± */
    right: 15px;
    background: white;
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    z-index: 199;
    width: 200px;
    font-size: 14px;
    border-left: 5px solid #ff4d6d;
    cursor: pointer;
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from { transform: translateX(50px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* 3. BÃ¼yÃ¼k Kart (Overlay) */
#vday-card-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.8); /* Arka planÄ± karart */
    z-index: 300;
    justify-content: center;
    align-items: center;
}

.vday-card {
    background: #fff0f3;
    width: 85%;
    max-width: 350px;
    padding: 20px;
    border-radius: 25px;
    text-align: center;
    position: relative;
    border: 4px solid #ffccd5;
    box-shadow: 0 0 50px rgba(255, 77, 109, 0.6);
    animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popUp {
    from { transform: scale(0.5); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

/* Kapat Butonu */
.close-card {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ff4d6d;
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
}

/* GÃ¶rkem Bebek Resmi */
.gorkem-img {
    width: 150px;
    height: 150px;
    object-fit: contain;
    border-radius: 50%;
    border: 3px dashed #ff4d6d;
    background: white;
    margin-bottom: 10px;
}

.love-message {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: #555;
    font-size: 16px;
    line-height: 1.5;
}
    
    </style>
</head>
<body>

<div id="game-container">
    <div id="login-screen">
        <h1 style="color: #ff9a9e;">Delfin Bebek</h1>
        <div class="login-box">
            <input type="text" id="username" value="delfin" readonly>
            <br>
            <button class="btn-main" onclick="startGame()">BaÄŸlan</button>
        </div>
    </div>

    <div id="game-ui">
        <div id="status-bar">Sunucuya baÄŸlanÄ±yor...</div>
        
        <div class="stats-container">
            <div class="stat-box">ğŸ” AÃ§lÄ±k <div class="bar-wrapper"><div id="hunger-bar" class="bar-fill"></div></div></div>
            <div class="stat-box">ğŸ§¼ Temizlik <div class="bar-wrapper"><div id="hygiene-bar" class="bar-fill"></div></div></div>
            <div class="stat-box">ğŸ˜´ Uyku <div class="bar-wrapper"><div id="sleep-bar" class="bar-fill"></div></div></div>
            <div class="stat-box">ğŸ® EÄŸlence <div class="bar-wrapper"><div id="fun-bar" class="bar-fill"></div></div></div>
        </div>

        <div class="character-area">
            <img id="char-img" src="./assets/idle.gif" alt="Karakter">
        </div>

        <div class="actions-container">
            <button class="action-btn" onclick="performAction('feed', 20)">ğŸ”</button>
            <button class="action-btn" onclick="performAction('wash', 100)">ğŸ§¼</button>
            <button class="action-btn" onclick="toggleSleep()">ğŸ˜´</button>
            <button class="action-btn" onclick="startMiniGame()">ğŸ®</button>
        </div>
        <div id="mini-game-screen">
        <div id="game-info">
            <span id="score-board">Puan: 0</span>
            <span id="time-board">SÃ¼re: 30</span>
        </div>
        
        <img id="player-char" src="./assets/idle.gif" style="position: absolute; bottom: 20px; left: 50%; width: 80px; height: 80px; transform: translateX(-50%); transition: left 0.1s; pointer-events: none;">
        
        <button onclick="endMiniGame(true)" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: none; border: 1px solid white; color: white; padding: 5px 10px; border-radius: 10px; cursor: pointer;">Ã‡Ä±k</button>
    </div>
    </div>
</div>

<div id="vday-btn" onclick="showNotification()">
    ğŸ’Œ
    <div class="heart-beat"></div>
</div>

<div id="vday-notification" onclick="openVDayCard()">
    ğŸ”” <strong>GÃ¶rkem Bebek'ten</strong> sana Ã¶zel bir mesaj var! <br>
    <span style="font-size:12px; color: #ff4d4d;">(Okumak iÃ§in tÄ±kla)</span>
</div>

<div id="vday-card-overlay">
    <div class="vday-card">
        <button class="close-card" onclick="closeVDayCard()">âœ–</button>
        
        <img src="./assets/gorkem_love.png" alt="GÃ¶rkem Bebek" class="gorkem-img">
        
        <h2 style="color: #d63384; margin: 10px 0;">Sevgililer GÃ¼nÃ¼n Kutlu Olsun! â¤ï¸</h2>
        
        <p class="love-message">
            Seninle her gÃ¼nÃ¼m oyun gibi eÄŸlenceli, <br>
            sensizken Ã¶zleminle dolu... <br>
            nerde olursan ol sana olan aÅŸkÄ±m hep sonsuz! <br>
            <br>
            Ä°yi ki varsÄ±n sevgilim...
            Sevgililer gÃ¼nÃ¼mÃ¼z kutlu olsun! â¤ï¸
        </p>
    </div>
</div>
    
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // --- BURAYI KENDÄ° BÄ°LGÄ°LERÄ°NLE DOLDUR ---
     const firebaseConfig = {
    apiKey: "AIzaSyAafnX1FRRmpgZeGcsU_Y0OnvcJnNYT9tc",
    authDomain: "dlfnb-fb286.firebaseapp.com",
    databaseURL: "https://dlfnb-fb286-default-rtdb.firebaseio.com",
    projectId: "dlfnb-fb286",
    storageBucket: "dlfnb-fb286.firebasestorage.app",
    messagingSenderId: "941682911917",
    appId: "1:941682911917:web:18f53833a4cd0076a2f424"
  };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const currentUser = "delfin";
    
    let localStats = {}; 
    let isActionPlaying = false; 
    let animationTimeout; 

    // Oyunu BaÅŸlat
    window.startGame = function() {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('game-ui').style.display = 'flex';
        
        const starCountRef = ref(db, 'users/' + currentUser);
        onValue(starCountRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                localStats = data;
                
                // --- Ä°ÅTE SÄ°HÄ°RLÄ° DOKUNUÅ BURADA ---
                // Veri ilk yÃ¼klendiÄŸinde "Offline HesaplamasÄ±" yapÄ±yoruz
                calculateOfflineProgress(data.lastSaveTime);

                updateUI(localStats);
                document.getElementById('status-bar').innerText = "ğŸŸ¢ CanlÄ± BaÄŸlantÄ±";
            } else {
                resetData();
            }
        });

        setInterval(gameLoop, 5000); // 5 saniyede bir dÃ¼ÅŸsÃ¼n (TarayÄ±cÄ± aÃ§Ä±kken)
    }

    // --- EKSÄ°K OLAN FONKSÄ°YON BU ---
    // Site kapalÄ±yken geÃ§en sÃ¼reyi hesaplayÄ±p statlarÄ± dÃ¼ÅŸÃ¼rÃ¼r
    // Site kapalÄ±yken geÃ§en sÃ¼reyi hesaplayan DÃœZELTÄ°LMÄ°Å fonksiyon
    function calculateOfflineProgress(lastTime) {
        if (!lastTime) return;

        const now = Date.now();
        const diffSeconds = Math.floor((now - lastTime) / 1000); // Saniye farkÄ±
        
        // Test iÃ§in 10 saniyeden fazla kapalÄ± kalÄ±rsa hesaplasÄ±n (CanlÄ±da bunu 60 yapabilirsin)
        if (diffSeconds > 10) {
            console.log("Site kapalÄ±yken geÃ§en sÃ¼re (sn):", diffSeconds);

            // FORMÃœL: Her 10 dakikada (600sn) 1 birim deÄŸiÅŸim olsun
            // HÄ±zlÄ± test etmek istersen 600 yerine 10 yazabilirsin.
            const changeAmount = Math.floor(diffSeconds / 600); 

            if (changeAmount > 0) {
                // 1. AÃ‡LIK, TEMÄ°ZLÄ°K ve EÄLENCE her tÃ¼rlÃ¼ azalÄ±r (Uyusa da uyanÄ±k olsa da acÄ±kÄ±r)
                localStats.hunger = Math.max(localStats.hunger - changeAmount, 0);
                localStats.hygiene = Math.max(localStats.hygiene - changeAmount, 0);
                localStats.fun = Math.max(localStats.fun - changeAmount, 0);

                // 2. KRÄ°TÄ°K NOKTA: UYKU MANTIÄI
                if (localStats.isSleeping === true) {
                    // EÄŸer uyuyorsa: Uyku puanÄ± ARTAR (Enerji dolar)
                    // Hatta uykudayken daha hÄ±zlÄ± dolsun diye changeAmount'u 2 ile Ã§arptÄ±m.
                    localStats.sleep = Math.min(localStats.sleep + (changeAmount * 10), 100);
                    
                    console.log(`Bebek uyuyordu, enerji doldu: +${changeAmount * 10}`);
                } else {
                    // EÄŸer uyanÄ±ksa: Uyku puanÄ± AZALIR (Yorulur)
                    localStats.sleep = Math.max(localStats.sleep - (changeAmount / 3), 0);
                    
                    console.log(`Bebek uyanÄ±ktÄ±, yoruldu: -${changeAmount / 3}`);
                }
                
                // Åimdiki zamanÄ± kaydet
                localStats.lastSaveTime = now;

                // Firebase'i gÃ¼ncelle
                set(ref(db, 'users/' + currentUser), localStats);
            }
        }
    }

    function resetData() {
        const initialData = {
            hunger: 100, hygiene: 100, sleep: 100, fun: 100,
            isSleeping: false,
            lastSaveTime: Date.now()
        };
        set(ref(db, 'users/' + currentUser), initialData);
    }

    window.performAction = function(type, amount) {
        if (!localStats) return;
        if (localStats.isSleeping && type !== 'sleep') {
            alert("Uyurken iÅŸlem yapamazsÄ±n! Ã–nce uyandÄ±r.");
            return;
        }

        if (type === 'feed') localStats.hunger = Math.min(localStats.hunger + amount, 100);
        if (type === 'wash') localStats.hygiene = 100;
        if (type === 'play') {
            localStats.fun = Math.min(localStats.fun + amount, 100);
            localStats.sleep = Math.max(localStats.sleep - 10, 0); 
        }
        
        localStats.lastSaveTime = Date.now();
        set(ref(db, 'users/' + currentUser), localStats);
        playAnimation(type);
    }
    // --- MÄ°NÄ° OYUN DEÄÄ°ÅKENLERÄ° ---
    let gameActive = false;
    let score = 0;
    let timeLeft = 30;
    let spawnInterval;
    let timerInterval;

    // Oyunu BaÅŸlat
    window.startMiniGame = function() {
        if (localStats.isSleeping) {
            alert("Bebek uyurken oyun oynayamazsÄ±n! Ã–nce uyandÄ±r.");
            return;
        }

        // EkranlarÄ± deÄŸiÅŸtir
        document.getElementById('game-ui').children[1].style.display = 'none'; // Stats gizle
        document.getElementById('game-ui').children[2].style.display = 'none'; // Karakter gizle
        document.getElementById('game-ui').children[3].style.display = 'none'; // Butonlar gizle
        document.getElementById('mini-game-screen').style.display = 'flex';

        // DeÄŸerleri sÄ±fÄ±rla
        score = 0;
        timeLeft = 30;
        gameActive = true;
        document.getElementById('score-board').innerText = "Puan: 0";
        document.getElementById('time-board').innerText = "SÃ¼re: 30";

        // ZamanlayÄ±cÄ±yÄ± baÅŸlat
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('time-board').innerText = "SÃ¼re: " + timeLeft;
            if (timeLeft <= 0) {
                endMiniGame(false); // SÃ¼re bitti
            }
        }, 1000);

        // Nesne dÃ¼ÅŸÃ¼rmeyi baÅŸlat
        spawnInterval = setInterval(spawnFallingItem, 700); // 0.7 saniyede bir dÃ¼ÅŸer
    };

    // Dokunmatik ve Mouse KontrolÃ¼ (Bunu script'in en altÄ±na, window.startMiniGame dÄ±ÅŸÄ±na koy)
    const gameScreen = document.getElementById('mini-game-screen');
    const player = document.getElementById('player-char');

    gameScreen.addEventListener('touchmove', (e) => {
        if (!gameActive) return;
        let touchX = e.touches[0].clientX;
        // SÄ±nÄ±rlarÄ± koru
        if (touchX > 40 && touchX < window.innerWidth - 40) {
            player.style.left = touchX + 'px';
        }
    });

    gameScreen.addEventListener('mousemove', (e) => {
        if (!gameActive) return;
        let mouseX = e.clientX;
        if (mouseX > 40 && mouseX < window.innerWidth - 40) {
            player.style.left = mouseX + 'px';
        }
    });

    // YukarÄ±dan Nesne DÃ¼ÅŸÃ¼r
    function spawnFallingItem() {
        if (!gameActive) return;

        const item = document.createElement('div');
        const items = ["â­", "â¤ï¸", "ğŸª", "ğŸ’"]; // DÃ¼ÅŸecek ÅŸeyler
        item.innerText = items[Math.floor(Math.random() * items.length)];
        item.classList.add('falling-item');
        
        // Rastgele yatay konum
        const randomLeft = Math.floor(Math.random() * (window.innerWidth - 60)) + 30;
        item.style.left = randomLeft + 'px';
        item.style.top = '-50px';
        
        // DÃ¼ÅŸme hÄ±zÄ± (SÃ¼re azaldÄ±kÃ§a hÄ±zlanabilir)
        const duration = Math.random() * 2 + 2; // 2 ile 4 saniye arasÄ±
        item.style.animationDuration = duration + 's';

        gameScreen.appendChild(item);

        // Ã‡arpÄ±ÅŸma KontrolÃ¼ (Her nesne kendi kendini kontrol eder)
        const collisionCheck = setInterval(() => {
            if (!gameActive) { clearInterval(collisionCheck); item.remove(); return; }

            const pRect = player.getBoundingClientRect();
            const iRect = item.getBoundingClientRect();

            // Basit Ã§arpÄ±ÅŸma mantÄ±ÄŸÄ±
            if (
                iRect.top + iRect.height > pRect.top + 10 && // BebeÄŸin kafasÄ±na deÄŸdi mi?
                iRect.top < pRect.bottom &&
                iRect.left < pRect.right &&
                iRect.right > pRect.left
            ) {
                // YAKALADI!
                score += 10;
                document.getElementById('score-board').innerText = "Puan: " + score;
                item.remove();
                clearInterval(collisionCheck);
            }

            // Ekrandan Ã§Ä±ktÄ±ysa sil
            if (iRect.top > window.innerHeight) {
                item.remove();
                clearInterval(collisionCheck);
            }
        }, 50);
    }

    // Oyunu Bitir
    window.endMiniGame = function(forceExit) {
        gameActive = false;
        clearInterval(spawnInterval);
        clearInterval(timerInterval);

        // Ekrandaki tÃ¼m dÃ¼ÅŸenleri temizle
        document.querySelectorAll('.falling-item').forEach(e => e.remove());

        // Ana ekrana dÃ¶n
        document.getElementById('mini-game-screen').style.display = 'none';
        
        // Eski elementleri geri getir
        const ui = document.getElementById('game-ui');
        ui.children[1].style.display = 'grid'; // Stats
        ui.children[2].style.display = 'flex'; // Karakter
        ui.children[3].style.display = 'flex'; // Butonlar

        if (!forceExit) {
            alert(`Oyun Bitti! Toplam Puan: ${score}`);
            
            // PuanÄ±na gÃ¶re eÄŸlenceyi fulle
            // 100 puan Ã¼stÃ¼ yaptÄ±ysa %100 doldurur
            localStats.fun = 100;
            // Oyun oynamak yorar, uykuyu azalt
            localStats.sleep = Math.max(localStats.sleep - 5, 0);
            
            localStats.lastSaveTime = Date.now();
            set(ref(db, 'users/' + currentUser), localStats);
            updateUI(localStats);
        }
    }

    window.toggleSleep = function() {
        if (!localStats) return;
        localStats.isSleeping = !localStats.isSleeping;
        localStats.lastSaveTime = Date.now();
        set(ref(db, 'users/' + currentUser), localStats);
    }

    function playAnimation(actionType) {
        const img = document.getElementById('char-img');
        isActionPlaying = true; 
        
        let gifName = 'idle';
        if (actionType === 'feed') gifName = 'eating';
        if (actionType === 'wash') gifName = 'washing';
        if (actionType === 'play') gifName = 'eating'; 

        img.src = `./assets/${gifName}.gif`;

        if (animationTimeout) clearTimeout(animationTimeout);

        animationTimeout = setTimeout(() => {
            isActionPlaying = false;
            updateCharacterState(); 
        }, 3000);
    }

    function updateCharacterState() {
        if (isActionPlaying) return; 

        const img = document.getElementById('char-img');
        let nextGif = 'idle'; 

        if (localStats.isSleeping) {
            nextGif = 'sleeping';
        }
        else if (localStats.sleep < 20) {
            nextGif = 'sleepy';
        }
        else if (localStats.hunger < 30) {
            nextGif = 'hungry';
        }
        else if (localStats.hygiene < 40) {
            nextGif = 'dirty';
        }

        const currentSrc = img.src;
        if (!currentSrc.includes(nextGif + '.gif')) {
            img.src = `./assets/${nextGif}.gif`;
        }
    }

    function updateUI(stats) {
        document.getElementById('hunger-bar').style.width = stats.hunger + '%';
        document.getElementById('hygiene-bar').style.width = stats.hygiene + '%';
        document.getElementById('sleep-bar').style.width = stats.sleep + '%';
        document.getElementById('fun-bar').style.width = stats.fun + '%';
        updateCharacterState(); 
    }

    function gameLoop() {
        if (!localStats.hunger) return;

        if (localStats.isSleeping) {
            localStats.sleep = Math.min(localStats.sleep + 7, 100); 
            localStats.hunger = Math.max(localStats.hunger - 0.5, 0); 
        } else {
            localStats.hunger = Math.max(localStats.hunger - 1, 0);
            localStats.hygiene = Math.max(localStats.hygiene - 0.5, 0);
            localStats.sleep = Math.max(localStats.sleep - 0.1, 0);
            localStats.fun = Math.max(localStats.fun - 1, 0);
        }
        
        // Loop iÃ§indeki kaydetmeyi kapattÄ±m ki sÃ¼rekli veritabanÄ±nÄ± yormasÄ±n
        // Sadece ekranda gÃ¼ncellensin, kullanÄ±cÄ± butonlara basÄ±nca veya
        // site kapanÄ±p aÃ§Ä±lÄ±nca kaydetsin daha saÄŸlÄ±klÄ±.
        // Ama "Benim internetim bol" diyorsan alttaki satÄ±rÄ± aÃ§abilirsin:
        // set(ref(db, 'users/' + currentUser), localStats);
        
        updateUI(localStats);
    }
    // --- SEVGÄ°LÄ°LER GÃœNÃœ FONKSÄ°YONLARI ---

    // 1. Mektup ikonuna basÄ±nca bildirimi gÃ¶ster
    window.showNotification = function() {
        const notif = document.getElementById('vday-notification');
        
        if (notif.style.display === 'block') {
            notif.style.display = 'none'; // AÃ§Ä±ksa kapat
        } else {
            notif.style.display = 'block'; // KapalÄ±ysa aÃ§
            
            // 5 saniye sonra otomatik kapansÄ±n (rahatsÄ±z etmesin)
            setTimeout(() => {
                notif.style.display = 'none';
            }, 5000);
        }
    }

    // 2. Bildirime tÄ±klayÄ±nca BÃ¼yÃ¼k KartÄ± AÃ§
    window.openVDayCard = function() {
        document.getElementById('vday-notification').style.display = 'none'; // Bildirimi gizle
        document.getElementById('vday-card-overlay').style.display = 'flex'; // KartÄ± aÃ§
        
        // Romantik bir efekt: Konfetiler (BasitÃ§e emoji yaÄŸdÄ±rabiliriz ama ÅŸimdilik sade kalsÄ±n)
    }

    // 3. KartÄ± Kapat
    window.closeVDayCard = function() {
        document.getElementById('vday-card-overlay').style.display = 'none';
    }

</script>
</body>

</html>



